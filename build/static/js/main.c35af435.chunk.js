(this.webpackJsonpnoctis=this.webpackJsonpnoctis||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/chocoboapi-c-2.fb4ca4e1.png"},28:function(e,t,a){e.exports=a(42)},33:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(15),o=a.n(r),l=a(4),i=(a(33),a(8)),c=a(9),m=a(11),u=a(10),p=a(12),d=a(13),h=a(27),f=(a(34),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:"",user:{},success:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(document.getElementById("overlay").style.display="none",sessionStorage.token){var e=JSON.parse(sessionStorage.user);this.setState({success:!0,user:e})}}},{key:"validateForm",value:function(){return this.state.username.length>0&&this.state.username.length>0||(document.getElementById("validation-error").style.display="block",!1)}},{key:"handleLogin",value:function(e){if(e.preventDefault(),document.getElementById("login-error").style.display="none",document.getElementById("validation-error").style.display="none",this.validateForm()){var t=this;document.getElementById("overlay").style.display="block";var a={username:this.state.username,password:this.state.password,audience:"MoogleApi"};fetch("https://chocoboapi.azurewebsites.net/v1/account/login",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){e.token?(sessionStorage.setItem("token",e.token),sessionStorage.setItem("user",JSON.stringify(e.user)),t.setState({success:!0,user:e.user})):(console.log("failed login"),document.getElementById("overlay").style.display="none",document.getElementById("login-error").style.display="block")}))}else console.log("validation failed")}},{key:"render",value:function(){var e=this,t=a(22);return!0===this.state.success?s.a.createElement(d.a,{to:"/noctis/profile"}):s.a.createElement("header",{className:"form-container"},s.a.createElement("img",{src:t,className:"main-photo",alt:"logo"}),s.a.createElement("p",null,"Enter credentials"),s.a.createElement(l.a,{path:"/noctis/login",component:f}),s.a.createElement(l.a,{path:"/noctis/register",component:g}),s.a.createElement("form",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"text",className:"form-control login-username",placeholder:"enter username",onChange:function(t){return e.setState({username:t.target.value})}})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"password",className:"form-control",placeholder:"enter password",onChange:function(t){return e.setState({password:t.target.value})}})),s.a.createElement("div",{id:"login-error"},"invalid credentials"),s.a.createElement("div",{id:"validation-error"},"enter your credentials"),s.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(t){return e.handleLogin(t)}},"Login")),s.a.createElement("p",{className:"font-regular"},"Or ",s.a.createElement(l.b,{to:"/noctis/register",className:"link"},"register")))}}]),t}(n.Component)),g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={username:"",firstname:"",email:"",password:"",confirmpassword:"",success:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"validateForm",value:function(){var e=0;return this.state.username.length<6&&(e=1),this.state.email.length<6&&(e=1),0===this.state.firstname.length&&(e=1),this.state.password.length<9&&(e=1),this.state.password.length>6&&this.state.password!==this.state.confirmpassword&&(e=1),1===e?(document.getElementById("validation-error").style.display="block",!1):(document.getElementById("validation-error").style.display="none",!0)}},{key:"handleRegistration",value:function(e){var t=this;if(e.preventDefault(),document.getElementById("validation-error").style.display="none",this.validateForm()){var a={username:this.state.username,firstname:this.state.firstname,email:this.state.email,password:this.state.password,confirmpassword:this.state.confirmpassword,audience:"MoogleApi"};fetch("https://chocoboapi.azurewebsites.net/v1/account/register",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){document.getElementById("overlay").style.display="none",e.token?(sessionStorage.setItem("token",e.token),sessionStorage.setItem("user",JSON.stringify(e.user)),t.setState({success:!0,user:e.user})):console.log("registration failed")}))}}},{key:"render",value:function(){var e=this,t=a(22);return!0===this.state.success?s.a.createElement(d.a,{to:"/noctis/profile"}):s.a.createElement("header",{className:"form-container"},s.a.createElement("img",{src:t,className:"main-photo",alt:"logo"}),s.a.createElement("p",null,"Sign up!"),s.a.createElement(l.a,{exact:!0,path:"/noctis",component:f}),s.a.createElement(l.a,{path:"/noctis/login",component:f}),s.a.createElement("form",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"text",className:"form-control login-username",placeholder:"username",onChange:function(t){return e.setState({username:t.target.value})}})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"first name",onChange:function(t){return e.setState({firstname:t.target.value})}})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"email",className:"form-control",placeholder:"enter email",onChange:function(t){return e.setState({email:t.target.value})}})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"password",className:"form-control",placeholder:"enter password",onChange:function(t){return e.setState({password:t.target.value})}})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"password",className:"form-control",placeholder:"confirm password",onChange:function(t){return e.setState({confirmpassword:t.target.value})}})),s.a.createElement("div",{id:"validation-error"},"form validation failed"),s.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(t){return e.handleRegistration(t)}},"Register")),s.a.createElement("p",{className:"font-regular"},"Or ",s.a.createElement(l.b,{to:"/noctis/login",className:"link"},"login")))}}]),t}(n.Component),y=a(20),v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:"",firstname:"",lastname:"",age:"",birthdate:"",city:"",state:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("overlay").style.display="none"}},{key:"isLoggedIn",value:function(){return!(!sessionStorage.token||"undefined"===sessionStorage.token)||(this.handleLogout(),!1)}},{key:"handleUserDelete",value:function(e){document.getElementById("overlay").style.display="none",console.log("user deleted")}},{key:"handleLogout",value:function(e){document.getElementById("overlay").style.display="none",sessionStorage.clear(),this.props.history.push("/noctis")}},{key:"handleUserUpdate",value:function(e){e.preventDefault(),document.getElementById("overlay").style.display="block";var t=sessionStorage.token,a=JSON.parse(sessionStorage.user);if(this.validateForm()){var n={id:a.id,username:""===this.state.username?a.userName:this.state.username,email:""===this.state.email?a.email:this.state.email,firstname:""===this.state.firstname?a.firstName:this.state.firstname,lastname:""===this.state.lastname?a.lastName:this.state.lastname,age:""===this.state.age?a.age:this.state.age,birthdate:""===this.state.birthdate?a.birthDate:this.state.birthdate,city:""===this.state.city?a.city:this.state.city,state:""===this.state.state?a.state:this.state.state};fetch("https://chocoboapi.azurewebsites.net/v1/manage/update",{method:"put",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){document.getElementById("overlay").style.display="none",e.user?sessionStorage.setItem("user",JSON.stringify(e.user)):console.log("update failed")}))}}},{key:"validateForm",value:function(){return document.getElementById("validation-error").style.display="none",!0}},{key:"render",value:function(){var e=this;if(this.isLoggedIn()){var t=JSON.parse(sessionStorage.user);return s.a.createElement("header",{className:"form-container"},s.a.createElement("div",{className:"profile-container"},s.a.createElement("img",{className:"wallpaper-photo",src:t.wallpaper,alt:t.userName}),s.a.createElement("img",{className:"profile-photo",src:t.photo,alt:t.userName})),s.a.createElement("p",{className:"font-weight-bold login-username"},t.userName),s.a.createElement("p",{className:"font-small text-secondary"},"Joined: ",y(t.joinDate).format("MM/DD/yyyy")),s.a.createElement("form",{className:"form-profile"},s.a.createElement("div",{className:"input-group input-group-override"},s.a.createElement("input",{type:"text",className:"form-control login-username",defaultValue:t.userName,placeholder:"user name",onChange:function(t){return e.setState({username:t.target.value})}}),s.a.createElement("span",null,"\xa0"),s.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.email,placeholder:"email",onChange:function(t){return e.setState({email:t.target.value})}})),s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.firstName,placeholder:"first name",onChange:function(t){return e.setState({firstname:t.target.value})}}),s.a.createElement("span",null,"\xa0"),s.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.lastName,placeholder:"last name",onChange:function(t){return e.setState({lastname:t.target.value})}})),s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{type:"number",className:"form-control",defaultValue:t.age,placeholder:"00",onChange:function(t){return e.setState({age:t.target.value})}}),s.a.createElement("span",null,"\xa0"),s.a.createElement("input",{type:"date",className:"form-control",defaultValue:y(t.birthDate).format("YYYY-MM-DD"),onChange:function(t){return e.setState({birthdate:t.target.value})}})),s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.city,placeholder:"city",onChange:function(t){return e.setState({city:t.target.value})}}),s.a.createElement("span",null,"\xa0"),s.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.state,placeholder:"state",onChange:function(t){return e.setState({state:t.target.value})}})),s.a.createElement("div",{id:"validation-error"},"form validation failed"),s.a.createElement("div",{className:"button-container"},s.a.createElement("button",{type:"submit",title:"Logout",className:"btn btn-secondary btn-profile",onClick:function(t){return e.handleLogout(t)}},s.a.createElement("i",{className:"fas fa-door-closed"})),s.a.createElement("button",{type:"submit",title:"Update Information",className:"btn btn-primary btn-profile",onClick:function(t){return e.handleUserUpdate(t)}},s.a.createElement("i",{className:"fas fa-user-edit"})),s.a.createElement("button",{type:"submit",title:"Delete Account",className:"btn btn-danger btn-profile",onClick:function(t){return e.handleUserDelete(t)}},s.a.createElement("i",{className:"fas fa-user-times"})))))}return s.a.createElement(d.a,{to:"/noctis"})}}]),t}(n.Component),E=(a(41),function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(l.a,{basename:"/"},s.a.createElement(h.a,{className:"dark-nav"}),s.a.createElement(d.b,{exact:!0,path:"/noctis",component:f}),s.a.createElement(d.b,{path:"/noctis/login",component:f}),s.a.createElement(d.b,{path:"/noctis/register",component:g}),s.a.createElement(d.b,{path:"/noctis/profile",component:v}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(l.a,null,s.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.c35af435.chunk.js.map