(this.webpackJsonpnoctis=this.webpackJsonpnoctis||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/chocoboapi-c-2.fb4ca4e1.png"},28:function(e,t,a){e.exports=a(42)},33:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(15),s=a.n(r),l=a(4),i=(a(33),a(8)),c=a(9),m=a(11),u=a(10),p=a(12),d=a(13),f=a(27),h=(a(34),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:"",user:{},success:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(document.getElementById("overlay").style.display="none",sessionStorage.token){var e=JSON.parse(sessionStorage.user);this.setState({success:!0,user:e})}}},{key:"validateForm",value:function(){return this.state.username.length>0&&this.state.username.length>0||(document.getElementById("validation-error").style.display="block",!1)}},{key:"handleLogin",value:function(e){if(e.preventDefault(),document.getElementById("login-error").style.display="none",document.getElementById("validation-error").style.display="none",this.validateForm()){var t=this;document.getElementById("overlay").style.display="block";var a={username:this.state.username,password:this.state.password,audience:"MoogleApi"};fetch("https://chocoboapi.azurewebsites.net/v1/account/login",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){e.token?(sessionStorage.setItem("token",e.token),sessionStorage.setItem("user",JSON.stringify(e.user)),t.setState({success:!0,user:e.user})):(console.log("failed login"),console.log(e.message),document.getElementById("overlay").style.display="none",document.getElementById("login-error").style.display="block")}))}else console.log("validation failed")}},{key:"render",value:function(){var e=this,t=a(22);return!0===this.state.success?o.a.createElement(d.a,{to:"/noctis/profile"}):o.a.createElement("header",{className:"form-container login-screen"},o.a.createElement("img",{src:t,className:"main-photo",alt:"logo"}),o.a.createElement("p",null,"Enter credentials"),o.a.createElement(l.a,{path:"/noctis/login",component:h}),o.a.createElement(l.a,{path:"/noctis/register",component:g}),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",className:"form-control login-username",placeholder:"enter username",onChange:function(t){return e.setState({username:t.target.value})}})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"password",className:"form-control",placeholder:"enter password",onChange:function(t){return e.setState({password:t.target.value})}})),o.a.createElement("div",{id:"login-error"},"invalid credentials"),o.a.createElement("div",{id:"validation-error"},"enter your credentials"),o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(t){return e.handleLogin(t)}},"Login")),o.a.createElement("p",{className:"font-regular"},"Or ",o.a.createElement(l.b,{to:"/noctis/register",className:"link"},"register")))}}]),t}(n.Component)),g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={username:"",firstname:"",email:"",password:"",confirmpassword:"",success:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"validateForm",value:function(){var e=0;return this.state.username.length<6&&(e=1),this.state.email.length<6&&(e=1),0===this.state.firstname.length&&(e=1),1===e?(document.getElementById("validation-error").style.display="block",!1):(document.getElementById("validation-error").style.display="none",!0)}},{key:"handleResponseErrors",value:function(e){var t=e.Password,a=e.ConfirmPassword,n=e.Email,o="";void 0!==n&&(o=n),void 0!==t&&(o+="<br/>"+t),void 0!==a&&(o+="<br/>"+a),document.getElementById("validation-error").innerHTML=o,document.getElementById("validation-error").style.display="block"}},{key:"handleRegistration",value:function(e){var t=this;if(e.preventDefault(),document.getElementById("validation-error").style.display="none",this.validateForm()){var a={username:this.state.username,firstname:this.state.firstname,email:this.state.email,password:this.state.password,confirmpassword:this.state.confirmpassword,audience:"ChocoboApi"};fetch("https://chocoboapi.azurewebsites.net/v1/account/register",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){document.getElementById("overlay").style.display="none",e.token?(sessionStorage.setItem("token",e.token),sessionStorage.setItem("user",JSON.stringify(e.user)),t.setState({success:!0,user:e.user})):(console.log("registration failed"),console.log(e.errors),t.handleResponseErrors(e.errors))}))}else console.log("validation failed")}},{key:"render",value:function(){var e=this,t=a(22);return!0===this.state.success?o.a.createElement(d.a,{to:"/noctis/profile"}):o.a.createElement("header",{className:"form-container"},o.a.createElement("img",{src:t,className:"main-photo",alt:"logo"}),o.a.createElement("p",null,"Sign up!"),o.a.createElement(l.a,{exact:!0,path:"/noctis",component:h}),o.a.createElement(l.a,{path:"/noctis/login",component:h}),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",className:"form-control login-username",placeholder:"username",onChange:function(t){return e.setState({username:t.target.value})}})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:"first name",onChange:function(t){return e.setState({firstname:t.target.value})}})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"email",className:"form-control",placeholder:"enter email",onChange:function(t){return e.setState({email:t.target.value})}})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"password",className:"form-control",placeholder:"enter password",onChange:function(t){return e.setState({password:t.target.value})}})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"password",className:"form-control",placeholder:"confirm password",onChange:function(t){return e.setState({confirmpassword:t.target.value})}})),o.a.createElement("div",{id:"validation-error"},"form validation failed"),o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(t){return e.handleRegistration(t)}},"Register")),o.a.createElement("p",{className:"font-regular"},"Or ",o.a.createElement(l.b,{to:"/noctis/login",className:"link"},"login")))}}]),t}(n.Component),y=a(20),v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handlePhotoUpload=function(){document.getElementById("upload-photo").click()},a.state={username:"",email:"",firstname:"",lastname:"",age:"",birthdate:"",city:"",state:"",photo:"",wallpaper:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("overlay").style.display="none"}},{key:"isLoggedIn",value:function(){return!(!sessionStorage.token||"undefined"===sessionStorage.token)||(this.handleLogout(),!1)}},{key:"handleUserDelete",value:function(e){document.getElementById("overlay").style.display="none",console.log("user deleted")}},{key:"handleResponseErrors",value:function(e){var t=e.Password,a=e.ConfirmPassword,n=e.Email,o="";void 0!==n&&(o=n),void 0!==t&&(o+="<br/>"+t),void 0!==a&&(o+="<br/>"+a),document.getElementById("validation-error").innerHTML=o,document.getElementById("validation-error").style.display="block"}},{key:"handleLogout",value:function(e){document.getElementById("overlay").style.display="none",sessionStorage.clear(),this.props.history.push("/noctis")}},{key:"handleUserUpdate",value:function(e){e.preventDefault(),document.getElementById("overlay").style.display="block";var t=sessionStorage.token,a=JSON.parse(sessionStorage.user);if(this.validateForm()){var n=new FormData;n.append("id",a.id),n.append("photo",""===this.state.photo?a.photo:document.forms["profile-form"]["upload-photo"].files[0]),n.append("wallpaper",""===this.state.wallpaper?a.wallpaper:document.forms["profile-form"]["upload-wallpaper"].files[0]),n.append("username",""===this.state.username?a.userName:this.state.username),n.append("email",""===this.state.email?a.email:this.state.email),n.append("firstname",""===this.state.firstname?a.firstName:this.state.firstname),n.append("lastname",""===this.state.lastname?a.lastName:this.state.lastname),n.append("age",""===this.state.age?a.age:this.state.age),n.append("birthdate",""===this.state.birthdate?a.birthDate:this.state.birthdate),n.append("city",""===this.state.city?a.city:this.state.city),n.append("state",""===this.state.state?a.state:this.state.state),fetch("https://chocoboapi.azurewebsites.net/v1/manage/update",{method:"put",headers:{Authorization:"Bearer "+t},body:n}).then((function(e){return e.json()})).then((function(e){document.getElementById("overlay").style.display="none",e.user?sessionStorage.setItem("user",JSON.stringify(e.user)):(console.log("update failed"),console.log(e.errors))}))}else console.log("validation failed")}},{key:"validateForm",value:function(){return document.getElementById("validation-error").style.display="none",!0}},{key:"handleProfilePhotoChange",value:function(e){var t=URL.createObjectURL(e.target.files[0]);t&&(document.getElementById("profile-photo").src=t,this.setState({photo:e.target.value}))}},{key:"render",value:function(){var e=this;if(this.isLoggedIn()){var t=JSON.parse(sessionStorage.user);return o.a.createElement("header",{className:"form-container"},o.a.createElement("div",{className:"profile-container"},o.a.createElement("img",{id:"wallpaper-photo",className:"wallpaper-photo",src:t.wallpaper,alt:t.userName}),o.a.createElement("img",{id:"profile-photo",className:"profile-photo",src:t.photo,alt:t.userName,onClick:this.handlePhotoUpload}),o.a.createElement("div",{className:"camera-container"},o.a.createElement("i",{className:"fas fa-camera"}))),o.a.createElement("form",{name:"profile-form",id:"profile-form",className:"profile-form",encType:"multipart/form-data",method:"put"},o.a.createElement("p",{className:"font-weight-bold login-username"},t.userName),o.a.createElement("p",{className:"font-small text-secondary"},"Joined: ",y(t.joinDate).format("MM/DD/yyyy")),o.a.createElement("div",{className:"input-group input-group-override"},o.a.createElement("input",{type:"text",className:"form-control login-username",defaultValue:t.userName,placeholder:"user name",onChange:function(t){return e.setState({username:t.target.value})}}),o.a.createElement("span",null,"\xa0"),o.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.email,placeholder:"email",onChange:function(t){return e.setState({email:t.target.value})}})),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.firstName,placeholder:"first name",onChange:function(t){return e.setState({firstname:t.target.value})}}),o.a.createElement("span",null,"\xa0"),o.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.lastName,placeholder:"last name",onChange:function(t){return e.setState({lastname:t.target.value})}})),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"number",className:"form-control",defaultValue:t.age,placeholder:"00",onChange:function(t){return e.setState({age:t.target.value})}}),o.a.createElement("span",null,"\xa0"),o.a.createElement("input",{type:"date",className:"form-control",defaultValue:y(t.birthDate).format("YYYY-MM-DD"),onChange:function(t){return e.setState({birthdate:t.target.value})}})),o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.city,placeholder:"city",onChange:function(t){return e.setState({city:t.target.value})}}),o.a.createElement("span",null,"\xa0"),o.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.state,placeholder:"state",onChange:function(t){return e.setState({state:t.target.value})}})),o.a.createElement("div",{id:"validation-error"},"form validation failed"),o.a.createElement("input",{id:"upload-photo",type:"file",accept:"image/*",name:"photo",ref:"photoUploader",onChange:function(t){return e.handleProfilePhotoChange(t)}}),o.a.createElement("input",{id:"upload-wallpaper",type:"file",accept:"image/*",name:"wallpaper"}),o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{type:"submit",title:"Logout",className:"btn btn-secondary btn-profile",onClick:function(t){return e.handleLogout(t)}},o.a.createElement("i",{className:"fas fa-door-closed"})),o.a.createElement("button",{type:"submit",title:"Update Information",className:"btn btn-primary btn-profile",onClick:function(t){return e.handleUserUpdate(t)}},o.a.createElement("i",{className:"fas fa-user-edit"})),o.a.createElement("button",{type:"submit",title:"Delete Account",className:"btn btn-danger btn-profile",onClick:function(t){return e.handleUserDelete(t)}},o.a.createElement("i",{className:"fas fa-user-times"})))))}return o.a.createElement(d.a,{to:"/noctis"})}}]),t}(n.Component),E=(a(41),function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(l.a,{basename:"/"},o.a.createElement(f.a,{className:"dark-nav"}),o.a.createElement(d.b,{exact:!0,path:"/noctis",component:h}),o.a.createElement(d.b,{path:"/noctis/login",component:h}),o.a.createElement(d.b,{path:"/noctis/register",component:g}),o.a.createElement(d.b,{path:"/noctis/profile",component:v}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(l.a,null,o.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.8a6da750.chunk.js.map